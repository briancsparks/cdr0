let username;
let rooms;

username = 'sparksb';

username = username || prompt("What is your username?")

// const socket = io('http://localhost:9000'); // the / namespace/endpoint
const nsSocket = io('/', {
  query: {
    username
  }
});


nsSocket.on('tellRoomNames', (roomNames) => {
  console.log('We have been told room names: ', roomNames);
  rooms = roomNames.rooms;

  const roomToJoin = rooms[0];

  nsSocket.emit('joinRoom', roomToJoin, (numClients) => {
    console.log(`joined ${roomToJoin}`, numClients);
  });
});


document.querySelector('.message-form').addEventListener('submit',formSubmission)

function formSubmission(event){
  event.preventDefault();
  const newMessage = document.querySelector('#user-message').value;
  nsSocket.emit('msgToRoom',{text: newMessage})
}



